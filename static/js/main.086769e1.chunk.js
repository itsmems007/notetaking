(this.webpackJsonpreactnotes=this.webpackJsonpreactnotes||[]).push([[0],{30:function(e,t,n){},36:function(e,t,n){e.exports=n(58)},41:function(e,t,n){},44:function(e,t){},50:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(31),c=n.n(o),s=(n(41),n(17)),i=n(5),u=n(1),l=n.n(u),d=n(7),p=n(10),f=n(11),m=n(16),h=n(15),v=n(2),b=n(4),E=n(32),y=function(){function e(t){Object(p.a)(this,e),this.db=new E.a("react-notes")}return Object(f.a)(e,[{key:"getAllNotes",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.allDocs({include_docs:!0});case 2:return t=e.sent,n={},t.rows.forEach((function(e){return n[e.id]=e.doc})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createNote",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.createdAt=new Date,t.updatedAt=new Date,e.next=4,this.db.post(Object(i.a)({},t));case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateNote",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.updatedAt=new Date,e.next=3,this.db.put(Object(i.a)({},t));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteNote",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.remove(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),w=(n(50),function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement(b.b,{to:"/"},r.a.createElement("h1",null,"ReactNotes")),r.a.createElement("span",{className:"navbar-buttons"},r.a.createElement(b.b,{className:"btn",to:"/new"}," + ")))}),g=n(22),j=n.n(g);n(55);var O=function(e){var t=e.note,n=t._id,a=t.title,o=(t.body,t.updatedAt);return r.a.createElement("div",{className:"notes-list-item"},r.a.createElement("h2",null,r.a.createElement(b.b,{to:"/notes/".concat(n)},a)),r.a.createElement("span",{className:"notes-list-date"},function(e){return j()(e).format("MMMM D YYYY, HH:mm")}(o)))},k=function(e){var t=e.notes;return r.a.createElement("div",{className:"notes-list"},t.map((function(e){return r.a.createElement(O,{note:e,key:"note-".concat(e._id)})})))},N=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(p.a)(this,n),a=t.call(this,e);var r=Object.values(e.notes);return r.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),a.state={notes:r},a}return Object(f.a)(n,[{key:"render",value:function(){return this.state.notes.length?r.a.createElement("div",null,r.a.createElement("h2",null,"Notes"),r.a.createElement(k,{notes:this.state.notes})):r.a.createElement("div",{className:"app-intro"},r.a.createElement("h2",null,"Welcome to ReactNotes"),r.a.createElement("p",null,"You don't have any notes. ",r.a.createElement(b.b,{className:"btn",to:"/new"},"Get started!")),r.a.createElement("p",null,"All notes you create will be stored right here, on your browser. No need to worry about logging in."),r.a.createElement("p",null,"This app also uses a ServiceWorker, so even if you're offline, you can still access and update your notes! And if your device supports it, you can save this page to your home screen and use it like any other app on your phone."),r.a.createElement("hr",null))}}]),n}(r.a.PureComponent),x=(n(30),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={note:{title:"",body:"",createdAt:null,updatedAt:null},saving:!1},a}return Object(f.a)(n,[{key:"handleSave",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({saving:!0}),e.next=3,this.props.onSave(Object(i.a)({},this.state.note));case 3:t=e.sent,this.props.history.replace("/notes/".concat(t.id));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateValue",value:function(e){var t=this.state.note;this.setState({note:Object(i.a)(Object(i.a)({},t),{},Object(s.a)({},e.target.name,e.target.value))})}},{key:"render",value:function(){var e=this,t=this.state.note;return r.a.createElement("div",{className:"note-form"},r.a.createElement("h1",null,"New Note"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleSave()}},r.a.createElement("div",{className:"note-form-field"},r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",name:"title",value:t.title,onChange:function(t){return e.updateValue(t)}})),r.a.createElement("div",{className:"note-form-field note-form-field-text"},r.a.createElement("textarea",{name:"body",value:t.body,onChange:function(t){return e.updateValue(t)}})),r.a.createElement("div",{className:"note-form-buttons"},r.a.createElement("input",{type:"submit",value:"Save"}),r.a.createElement(b.b,{to:"/"},"Cancel"))))}}]),n}(r.a.PureComponent)),S=n(34),D=n.n(S),A=(n(56),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"renderDate",value:function(){return j()(this.props.note.updatedAt).format("MMMM D YYYY, HH:mm")}},{key:"componentWillMount",value:function(){this.props.note||this.props.history.replace("/")}},{key:"render",value:function(){var e=this,t=this.props.note;return t?r.a.createElement("div",null,r.a.createElement("h1",null,t.title),r.a.createElement("div",{className:"note-created"},this.renderDate(),r.a.createElement(b.b,{className:"note-edit",to:"/notes/".concat(t._id,"/edit")},"Edit"),r.a.createElement("button",{className:"btn",onClick:function(n){return e.props.onDelete(t._id)}},"Delete")),r.a.createElement("div",{className:"note-body",dangerouslySetInnerHTML:{__html:D()(t.body)}})):null}}]),n}(r.a.PureComponent)),C=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={note:{title:"",body:"",createdAt:null,updatedAt:null},saving:!1},a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({note:Object(i.a)({},this.props.note)});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({saving:!0}),e.next=3,this.props.onSave(Object(i.a)({},this.state.note));case 3:t=e.sent,this.props.history.replace("/notes/".concat(t.id));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateValue",value:function(e){var t=this.state.note;this.setState({note:Object(i.a)(Object(i.a)({},t),{},Object(s.a)({},e.target.name,e.target.value))})}},{key:"render",value:function(){var e=this;if(this.state.loading)return r.a.createElement("h1",null,"Loading...");var t=this.state.note;return r.a.createElement("div",{className:"note-form"},r.a.createElement("h1",null,"Edit Note"),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleSave()}},r.a.createElement("div",{className:"note-form-field"},r.a.createElement("label",null,"Title"),r.a.createElement("input",{type:"text",name:"title",value:t.title,onChange:function(t){return e.updateValue(t)}})),r.a.createElement("div",{className:"note-form-field note-form-field-text"},r.a.createElement("textarea",{name:"body",value:t.body,onChange:function(t){return e.updateValue(t)}})),r.a.createElement("div",{className:"note-form-buttons"},r.a.createElement("input",{type:"submit",value:"Save"}),r.a.createElement(b.b,{to:"/notes/".concat(t._id)},"Cancel"))))}}]),n}(r.a.PureComponent),M=(n(57),function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(p.a)(this,n),a=t.call(this,e);var r=new y;return a.state={db:r,notes:[],loading:!0},a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.db.getAllNotes();case 2:t=e.sent,this.setState({notes:t,loading:!1});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSave",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.db[n](t);case 2:return a=e.sent,r=this.state.notes,t._id=a.id,t._rev=a.rev,this.setState({notes:Object(i.a)(Object(i.a)({},r),{},Object(s.a)({},a.id,t))}),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleDelete",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.notes,a=n[t],!n[t]||!window.confirm("Are you sure you want to delete this note?")){e.next=7;break}return e.next=5,this.state.db.deleteNote(a);case 5:delete n[t],this.setState({notes:n});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderContent",value:function(){var e=this;return this.state.loading?r.a.createElement("h2",null,"Loading..."):r.a.createElement("div",{className:"app-content"},r.a.createElement(v.a,{exact:!0,path:"/",component:function(t){return r.a.createElement(N,Object.assign({},t,{notes:e.state.notes}))}}),r.a.createElement(v.a,{exact:!0,path:"/notes/:id",component:function(t){return r.a.createElement(A,Object.assign({},t,{note:e.state.notes[t.match.params.id],onDelete:function(t){return e.handleDelete(t)}}))}}),r.a.createElement(v.a,{path:"/notes/:id/edit",component:function(t){return r.a.createElement(C,Object.assign({},t,{note:e.state.notes[t.match.params.id],onSave:function(t){return e.handleSave(t,"updateNote")}}))}}),r.a.createElement(v.a,{path:"/new",component:function(t){return r.a.createElement(x,Object.assign({},t,{onSave:function(t){return e.handleSave(t,"createNote")}}))}}),r.a.createElement(v.a,{path:"/new",component:function(t){return r.a.createElement("search",Object.assign({},t,{onsearch:function(t){return e.handleSearch(t,"search")}}))}}))}},{key:"render",value:function(){return r.a.createElement(b.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(w,null),this.renderContent()))}}]),n}(a.Component)),_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Y(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(M,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");_?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Y(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Y(e)}))}}()}},[[36,1,2]]]);
//# sourceMappingURL=main.086769e1.chunk.js.map